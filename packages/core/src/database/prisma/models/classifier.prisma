model ClassifierTemplate {
  id           String          @id @default(cuid(2))
  name         String          @unique
  description  String?
  classifierId String
  modelInput   Json?
  createdAt    DateTime        @default(now())
  updatedAt    DateTime        @updatedAt
  runs         ClassifierRun[]

  @@index([classifierId])
}

model ClassifierRun {
  id           String              @id @default(cuid(2))
  status       ClassifierRunStatus
  result       Json?
  errorMessage String?
  createdAt    DateTime            @default(now())
  startedAt    DateTime?
  completedAt  DateTime?

  classifierTemplateId String
  classifierTemplate   ClassifierTemplate @relation(fields: [classifierTemplateId], references: [id], onDelete: Cascade)
  assetVariantId       String
  assetVariant         AssetVariant       @relation(fields: [assetVariantId], references: [id], onDelete: Cascade)

  @@index([classifierTemplateId])
  @@index([assetVariantId])
  @@index([createdAt])
}

enum ClassifierRunStatus {
  PROCESSING
  SUCCESS
  FAILED
}
